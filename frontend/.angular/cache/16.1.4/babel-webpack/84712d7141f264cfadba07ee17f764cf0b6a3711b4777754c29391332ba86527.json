{"ast":null,"code":"import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from './auth.service';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/common/http\";\nexport let DrinksService = /*#__PURE__*/(() => {\n  class DrinksService {\n    // = {\n    //                             1: {\n    //                             id: 1,\n    //                             title: 'matcha shake',\n    //                             recipe: [\n    //                                   {\n    //                                     name: 'milk',\n    //                                     color: 'grey',\n    //                                     parts: 1\n    //                                   },\n    //                                   {\n    //                                     name: 'matcha',\n    //                                     color: 'green',\n    //                                     parts: 3\n    //                                   },\n    //                                 ]\n    //                           },\n    //                           2: {\n    //                             id: 2,\n    //                             title: 'flatwhite',\n    //                             recipe: [\n    //                                   {\n    //                                     name: 'milk',\n    //                                     color: 'grey',\n    //                                     parts: 3\n    //                                   },\n    //                                   {\n    //                                     name: 'coffee',\n    //                                     color: 'brown',\n    //                                     parts: 1\n    //                                   },\n    //                                 ]\n    //                           },\n    //                           3: {\n    //                             id: 3,\n    //                             title: 'cap',\n    //                             recipe: [\n    //                                   {\n    //                                     name: 'foam',\n    //                                     color: 'white',\n    //                                     parts: 1\n    //                                   },\n    //                                   {\n    //                                     name: 'milk',\n    //                                     color: 'grey',\n    //                                     parts: 2\n    //                                   },\n    //                                   {\n    //                                     name: 'coffee',\n    //                                     color: 'brown',\n    //                                     parts: 1\n    //                                   },\n    //                                 ]\n    //                           }\n    //   };\n    constructor(auth, http) {\n      this.auth = auth;\n      this.http = http;\n      this.url = environment.apiServerUrl;\n      this.items = {};\n    }\n    getHeaders() {\n      const header = {\n        headers: new HttpHeaders().set('Authorization', `Bearer ${this.auth.activeJWT()}`)\n      };\n      return header;\n    }\n    getDrinks() {\n      if (this.auth.can('get:drinks-detail')) {\n        this.http.get(this.url + '/drinks-detail', this.getHeaders()).subscribe(res => {\n          this.drinksToItems(res.drinks);\n          console.log(res);\n        });\n      } else {\n        this.http.get(this.url + '/drinks', this.getHeaders()).subscribe(res => {\n          this.drinksToItems(res.drinks);\n          console.log(res);\n        });\n      }\n    }\n    saveDrink(drink) {\n      if (drink.id >= 0) {\n        // patch\n        this.http.patch(this.url + '/drinks/' + drink.id, drink, this.getHeaders()).subscribe(res => {\n          if (res.success) {\n            this.drinksToItems(res.drinks);\n          }\n        });\n      } else {\n        // insert\n        this.http.post(this.url + '/drinks', drink, this.getHeaders()).subscribe(res => {\n          if (res.success) {\n            this.drinksToItems(res.drinks);\n          }\n        });\n      }\n    }\n    deleteDrink(drink) {\n      delete this.items[drink.id];\n      this.http.delete(this.url + '/drinks/' + drink.id, this.getHeaders()).subscribe(res => {});\n    }\n    drinksToItems(drinks) {\n      for (const drink of drinks) {\n        this.items[drink.id] = drink;\n      }\n    }\n  }\n  DrinksService.ɵfac = function DrinksService_Factory(t) {\n    return new (t || DrinksService)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.HttpClient));\n  };\n  DrinksService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DrinksService,\n    factory: DrinksService.ɵfac,\n    providedIn: 'root'\n  });\n  return DrinksService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}